{% extends "base.html" %}

{% block title %}Cancellation Policy - STARBLUE{% endblock %}

{% block content %}
<div class="policy-page">
    <!-- Header -->
    <section class="policy-header py-5 bg-gradient-primary text-white">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="display-5 fw-bold mb-3">Cancellation Policy</h1>
                    <p class="lead mb-0">Understand our flexible policies for booking cancellations</p>
                </div>
                <div class="col-lg-4">
                    <div class="policy-illustration">
                        <img src="{{ url_for('static', filename='images/clipart/customer-support.png') }}" 
                             alt="Policy Support" class="img-fluid animate-float">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Actions -->
    <section class="quick-actions py-4 bg-light">
        <div class="container">
            <div class="row g-3">
                <div class="col-md-3">
                    <a href="#flight-policy" class="btn btn-outline-primary w-100">
                        <i class="fas fa-plane me-2"></i>Flight Policy
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="#train-policy" class="btn btn-outline-primary w-100">
                        <i class="fas fa-train me-2"></i>Train Policy
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="#bus-policy" class="btn btn-outline-primary w-100">
                        <i class="fas fa-bus me-2"></i>Bus Policy
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="{{ url_for('manage_booking') }}" class="btn btn-primary w-100">
                        <i class="fas fa-edit me-2"></i>Manage Booking
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Policy Content -->
    <section class="policy-content py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <!-- General Policy -->
                    <div class="policy-section mb-5">
                        <h2 class="section-title mb-4">General Policy</h2>
                        <div class="card">
                            <div class="card-body">
                                <div class="row g-4">
                                    <div class="col-md-6">
                                        <div class="policy-item">
                                            <div class="policy-icon">
                                                <i class="fas fa-clock text-success"></i>
                                            </div>
                                            <div class="policy-content">
                                                <h5>Free Cancellation</h5>
                                                <p class="text-muted">Cancel your booking within 24 hours of booking for a full refund (conditions apply).</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="policy-item">
                                            <div class="policy-icon">
                                                <i class="fas fa-shield-alt text-primary"></i>
                                            </div>
                                            <div class="policy-content">
                                                <h5>Secure Refunds</h5>
                                                <p class="text-muted">All refunds are processed securely to your original payment method.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="policy-item">
                                            <div class="policy-icon">
                                                <i class="fas fa-headset text-warning"></i>
                                            </div>
                                            <div class="policy-content">
                                                <h5>24/7 Support</h5>
                                                <p class="text-muted">Our customer support team is available round the clock to assist you.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Flight Policy -->
                    <div class="policy-section mb-5" id="flight-policy">
                        <h2 class="section-title mb-4">
                            <i class="fas fa-plane me-2 text-primary"></i>Flight Cancellation Policy
                        </h2>
                        
                        <div class="card mb-4">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Cancellation Charges</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Time Before Departure</th>
                                                <th>Cancellation Charge</th>
                                                <th>Refund Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>More than 24 hours</td>
                                                <td>₹3,000 + Airline charges</td>
                                                <td>Balance amount</td>
                                            </tr>
                                            <tr>
                                                <td>4-24 hours</td>
                                                <td>₹3,500 + Airline charges</td>
                                                <td>Balance amount</td>
                                            </tr>
                                            <tr>
                                                <td>Less than 4 hours</td>
                                                <td>₹4,000 + Airline charges</td>
                                                <td>Balance amount</td>
                                            </tr>
                                            <tr>
                                                <td>No Show</td>
                                                <td>100% of ticket value</td>
                                                <td>No refund</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Train Policy -->
                    <div class="policy-section mb-5" id="train-policy">
                        <h2 class="section-title mb-4">
                            <i class="fas fa-train me-2 text-success"></i>Train Cancellation Policy
                        </h2>
                        
                        <div class="card mb-4">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Cancellation Charges</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Time Before Departure</th>
                                                <th>Cancellation Charge</th>
                                                <th>Refund Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>More than 48 hours</td>
                                                <td>₹240 per passenger</td>
                                                <td>Balance amount</td>
                                            </tr>
                                            <tr>
                                                <td>12-48 hours</td>
                                                <td>25% of ticket value</td>
                                                <td>75% refund</td>
                                            </tr>
                                            <tr>
                                                <td>4-12 hours</td>
                                                <td>50% of ticket value</td>
                                                <td>50% refund</td>
                                            </tr>
                                            <tr>
                                                <td>Less than 4 hours</td>
                                                <td>100% of ticket value</td>
                                                <td>No refund</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <h6 class="alert-heading">
                                <i class="fas fa-info-circle me-2"></i>Special Conditions for Trains
                            </h6>
                            <ul class="mb-0">
                                <li>Tatkal tickets: No cancellation allowed</li>
                                <li>Premium Tatkal tickets: No cancellation allowed</li>
                                <li>RAC/Waitlisted tickets: Full refund if not confirmed</li>
                                <li>Confirmed tickets: As per above table</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Bus Policy -->
                    <div class="policy-section mb-5" id="bus-policy">
                        <h2 class="section-title mb-4">
                            <i class="fas fa-bus me-2 text-warning"></i>Bus Cancellation Policy
                        </h2>
                        
                        <div class="card mb-4">
                            <div class="card-header bg-warning text-dark">
                                <h5 class="mb-0">Cancellation Charges</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Time Before Departure</th>
                                                <th>Cancellation Charge</th>
                                                <th>Refund Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>More than 24 hours</td>
                                                <td>₹150 per passenger</td>
                                                <td>Balance amount</td>
                                            </tr>
                                            <tr>
                                                <td>6-24 hours</td>
                                                <td>25% of ticket value</td>
                                                <td>75% refund</td>
                                            </tr>
                                            <tr>
                                                <td>2-6 hours</td>
                                                <td>50% of ticket value</td>
                                                <td>50% refund</td>
                                            </tr>
                                            <tr>
                                                <td>Less than 2 hours</td>
                                                <td>100% of ticket value</td>
                                                <td>No refund</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Important Notes -->
                    <div class="policy-section">
                        <h2 class="section-title mb-4">Important Notes</h2>
                        <div class="card">
                            <div class="card-body">
                                <div class="row g-4">
                                    <div class="col-12">
                                        <div class="alert alert-warning">
                                            <h6 class="alert-heading">
                                                <i class="fas fa-exclamation-triangle me-2"></i>Please Note
                                            </h6>
                                            <ul class="mb-0">
                                                <li>All timings mentioned are based on the scheduled departure time</li>
                                                <li>Refund processing time: 7-10 working days</li>
                                                <li>Convenience fees are non-refundable</li>
                                                <li>Group bookings may have different cancellation policies</li>
                                                <li>Festival and peak season bookings may have special terms</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <h6 class="fw-bold">Refund Process</h6>
                                        <ol class="small">
                                            <li>Submit cancellation request</li>
                                            <li>Cancellation charges deducted</li>
                                            <li>Refund initiated to original payment method</li>
                                            <li>Refund credited within 7-10 working days</li>
                                        </ol>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <h6 class="fw-bold">Change Process</h6>
                                        <ol class="small">
                                            <li>Submit change request</li>
                                            <li>Check availability for new date/time</li>
                                            <li>Pay change charges + fare difference</li>
                                            <li>Receive updated booking confirmation</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Sidebar -->
                <div class="col-lg-4">
                    <div class="policy-sidebar sticky-top" style="top: 100px;">
                        <!-- Quick Actions -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h6 class="mb-0">Quick Actions</h6>
                            </div>
                            <div class="card-body">
                                <div class="d-grid gap-2">
                                    <a href="{{ url_for('manage_booking') }}" class="btn btn-primary">
                                        <i class="fas fa-edit me-2"></i>Manage My Booking
                                    </a>
                                    <a href="{{ url_for('track') }}" class="btn btn-outline-primary">
                                        <i class="fas fa-search me-2"></i>Track My Booking
                                    </a>
                                    <button class="btn btn-outline-success" onclick="downloadPolicy()">
                                        <i class="fas fa-download me-2"></i>Download Policy
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Support -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h6 class="mb-0">Need Help?</h6>
                            </div>
                            <div class="card-body">
                                <div class="support-options">
                                    <div class="support-item">
                                        <i class="fas fa-phone text-primary"></i>
                                        <div class="ms-3">
                                            <h6 class="mb-0">Call Us</h6>
                                            <p class="text-muted mb-0">+91 1234567890</p>
                                            <small class="text-success">24/7 Available</small>
                                        </div>
                                    </div>
                                    <div class="support-item mt-3">
                                        <i class="fas fa-envelope text-info"></i>
                                        <div class="ms-3">
                                            <h6 class="mb-0">Email Us</h6>
                                            <p class="text-muted mb-0">support@starblue.com</p>
                                            <small class="text-muted">Response within 2 hours</small>
                                        </div>
                                    </div>
                                    <div class="support-item mt-3">
                                        <i class="fas fa-comments text-success"></i>
                                        <div class="ms-3">
                                            <h6 class="mb-0">Live Chat</h6>
                                            <p class="text-muted mb-0">Chat with our experts</p>
                                            <button class="btn btn-sm btn-success mt-1" onclick="openLiveChat()">
                                                Start Chat
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- FAQ -->
                        <div class="card">
                            <div class="card-header">
                                <h6 class="mb-0">Frequently Asked Questions</h6>
                            </div>
                            <div class="card-body">
                                <div class="accordion" id="faqAccordion">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button collapsed" type="button" 
                                                    data-bs-toggle="collapse" data-bs-target="#faq1">
                                                How long does refund take?
                                            </button>
                                        </h2>
                                        <div id="faq1" class="accordion-collapse collapse" 
                                             data-bs-parent="#faqAccordion">
                                            <div class="accordion-body small">
                                                Refunds are processed within 7-10 working days to your original payment method.
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button collapsed" type="button" 
                                                    data-bs-toggle="collapse" data-bs-target="#faq2">
                                                Can I change passenger name?
                                            </button>
                                        </h2>
                                        <div id="faq2" class="accordion-collapse collapse" 
                                             data-bs-parent="#faqAccordion">
                                            <div class="accordion-body small">
                                                Name changes are allowed with additional charges. Contact our support team for assistance.
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button collapsed" type="button" 
                                                    data-bs-toggle="collapse" data-bs-target="#faq3">
                                                What if my flight is cancelled?
                                            </button>
                                        </h2>
                                        <div id="faq3" class="accordion-collapse collapse" 
                                             data-bs-parent="#faqAccordion">
                                            <div class="accordion-body small">
                                                If the airline cancels your flight, you get a full refund or free rescheduling.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}

{% block extra_js %}
<script>
function downloadPolicy() {
    // Create a simple PDF or open print dialog
    window.print();
}

function openLiveChat() {
    // Implement live chat functionality
    alert('Live chat will open soon! For immediate assistance, please call +91 1234567890');
}

// Smooth scrolling for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Highlight current section in navigation
window.addEventListener('scroll', function() {
    const sections = ['flight-policy', 'train-policy', 'bus-policy'];
    const scrollPos = window.scrollY + 100;
    
    sections.forEach(sectionId => {
        const section = document.getElementById(sectionId);
        const navLink = document.querySelector(`a[href="#${sectionId}"]`);
        
        if (section && navLink) {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.offsetHeight;
            
            if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                navLink.classList.add('active');
            } else {
                navLink.classList.remove('active');
            }
        }
    });
});
</script>
{% endblock %}
