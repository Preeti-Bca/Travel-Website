{% extends "base.html" %}

{% block title %}{{ post.title }} - STARBLUE Blog{% endblock %}

{% block extra_css %}
<style>
    /* =========================================
   STARBLUE Blog Post — Responsive CSS (drop-in)
   Mobile-first; HTML unchanged
   ========================================= */

/* Provide missing tokens used by this page */
:root{
  --primary-dark: #0052a3;      /* darker brand blue */
  --primary-light: #e6f2ff;     /* pale blue wash */
  --content-max: 800px;
  --radius-lg: 15px;
  --shadow-sm: 0 5px 15px rgba(0,0,0,.1);
  --shadow-md: 0 10px 30px rgba(0,0,0,.12);
  --space-1: .5rem;
  --space-2: .75rem;
  --space-3: 1rem;
  --space-4: 1.25rem;
  --space-5: 1.5rem;
  --space-6: 2rem;
}

/* Smooth type scale */
.blog-post-title{font-size:clamp(1.6rem, 4.5vw, 2.5rem);line-height:1.3;margin-bottom:0;font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,.25)}
.blog-post-content h1{font-size:clamp(1.5rem,4vw,2rem)}
.blog-post-content h2{font-size:clamp(1.25rem,3.2vw,1.8rem)}
.blog-post-content h3{font-size:clamp(1.1rem,2.8vw,1.5rem)}

.blog-post-hero{
  background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
  color:#fff;
  padding: 56px 0 32px; /* comfortable on small screens */
  margin-bottom: 40px;
}

/* Meta row wraps nicely */
.blog-post-meta{
  display:flex;flex-wrap:wrap;gap:var(--space-3);align-items:center;
  margin-bottom:var(--space-3);font-size:.95rem;opacity:.9
}
.blog-post-meta>div{display:flex;align-items:center;gap:.5rem}
.blog-post-category{
  background:rgba(255,255,255,.2);padding:.35rem .75rem;border-radius:999px;
  font-weight:700;text-transform:uppercase;letter-spacing:.5px;font-size:.8rem
}

/* Main content card */
.blog-post-content{
  width:100%;max-width:var(--content-max);margin:0 auto 40px;
  background:#fff;padding: clamp(20px, 3.5vw, 40px);
  border-radius:var(--radius-lg);box-shadow:var(--shadow-md)
}
.blog-post-content p{
  line-height:1.8;margin-bottom:1rem;color:#3f3f3f;font-size:clamp(1rem, 2.2vw, 1.1rem)
}
.blog-post-content ul,.blog-post-content ol{margin-bottom:1rem;padding-left:1.6rem}
.blog-post-content li{margin-bottom:.5rem;line-height:1.6;color:#555}
.blog-post-content blockquote{
  background: linear-gradient(135deg, var(--primary-light) 0%, rgba(135,206,235,.12) 100%);
  border-left:4px solid var(--primary-color);padding:1rem 1.25rem;margin:1.25rem 0;
  border-radius:0 var(--radius-lg) var(--radius-lg) 0;font-style:italic;color:var(--primary-dark)
}
.blog-post-content img{
  max-width:100%;height:auto;border-radius:10px;margin:1rem 0;box-shadow:var(--shadow-sm)
}

/* Tags */
.blog-post-tags{margin-top:var(--space-5);padding-top:var(--space-3);border-top:1px solid #eee}
.blog-post-tags h4{color:var(--primary-dark);margin-bottom:.75rem;font-size:1.05rem}
.tag{
  display:inline-block;background:var(--primary-color);color:#fff;padding:.35rem .75rem;border-radius:999px;
  font-size:.8rem;margin:.25rem .5rem .25rem 0;text-decoration:none;transition:transform .2s ease, opacity .2s ease, background .2s ease
}
.tag:hover{background:var(--primary-dark);color:#fff;transform:translateY(-2px)}

/* Top navigation row */
.blog-post-navigation{
  display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;
  gap:var(--space-3);margin-bottom:32px
}
.nav-btn{
  background:#fff;border:2px solid var(--primary-color);color:var(--primary-dark);
  padding:.7rem 1rem;border-radius:25px;text-decoration:none;font-weight:500;display:flex;align-items:center;gap:.5rem;
  transition:transform .2s ease, background .2s ease, color .2s ease, box-shadow .2s ease
}
.nav-btn:hover{background:var(--primary-color);color:#fff;transform:translateY(-2px);box-shadow:0 5px 15px rgba(135,206,235,.35)}

/* Related posts */
.related-posts{background:#f8f9fa;padding:40px 0;margin-top:40px}
.related-posts h3{
  text-align:center;color:var(--primary-dark);margin-bottom:28px;
  font-size:clamp(1.25rem, 3.5vw, 2rem);font-weight:600
}
.related-posts-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: clamp(16px, 3vw, 30px);
}
.related-post-card{
  background:#fff;border-radius:10px;padding: clamp(16px, 3vw, 25px);
  box-shadow:var(--shadow-sm);transition:transform .2s ease, box-shadow .2s ease
}
.related-post-card:hover{transform:translateY(-4px);box-shadow:0 10px 25px rgba(0,0,0,.15)}
.related-post-card h4{color:var(--primary-dark);margin-bottom:.5rem;font-size:1.1rem}
.related-post-card h4 a{color:inherit;text-decoration:none;transition:color .2s ease}
.related-post-card h4 a:hover{color:var(--primary-color)}
.related-post-card p{color:#666;font-size:.95rem;line-height:1.6;margin-bottom:.75rem}
.related-post-card .post-meta{font-size:.85rem;color:#888;display:flex;justify-content:space-between;align-items:center;gap:.75rem;flex-wrap:wrap}

/* Share section */
.share-buttons{margin-top:var(--space-5);padding-top:var(--space-3);border-top:1px solid #eee;text-align:center}
.share-buttons h4{margin-bottom:var(--space-3);color:var(--primary-dark)}
.share-btn{
  display:inline-flex;align-items:center;justify-content:center;
  width:45px;height:45px;border-radius:50%;color:#fff;text-decoration:none;margin:0 .35rem;
  transition:transform .2s ease, box-shadow .2s ease, opacity .2s ease;font-size:1.1rem
}
.share-btn:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,0,0,.2);color:#fff}
.share-btn.facebook{background:#3b5998}.share-btn.twitter{background:#1da1f2}
.share-btn.linkedin{background:#0077b5}.share-btn.whatsapp{background:#25d366}

/* ============  Breakpoints  ============ */

/* ≤ 575px: smallest phones (defaults already mobile-first) */
@media (max-width: 575.98px){
  .blog-post-hero{padding:48px 0 28px}
  .blog-post-content{margin:0 12px 28px}
  .blog-post-navigation{flex-direction:column;align-items:stretch}
  .nav-btn{width:100%;justify-content:center}
}

/* ≥ 576px: small phones → large phones */
@media (min-width: 576px){
  .blog-post-content{margin:0 auto 36px}
}

/* ≥ 768px: tablets */
@media (min-width: 768px){
  .blog-post-hero{padding:60px 0 36px}
  .blog-post-navigation{flex-wrap:nowrap}
}

/* ≥ 992px: laptops/desktop */
@media (min-width: 992px){
  .blog-post-hero{padding:72px 0 40px}
  .blog-post-content{padding: clamp(28px, 3vw, 40px)}
  .related-posts{padding:56px 0;margin-top:48px}
}

/* ≥ 1200px: large desktops — let containers breathe a bit more via Bootstrap container widths */

/* Accessibility / motion */
@media (prefers-reduced-motion: reduce){
  .nav-btn,.tag,.related-post-card,.share-btn{transition:none}
}

/* Print-friendly article (hides chrome, keeps content) */
@media print{
  nav, .footer, .blog-post-navigation, .share-buttons, .related-posts{display:none !important}
  .blog-post-content{box-shadow:none;padding:0;margin:0;max-width:100%}
  body{background:#fff}
}

</style>
{% endblock %}

{% block content %}
<!-- Blog Post Hero -->
<section class="blog-post-hero">
    <div class="container">
        <div class="blog-post-meta">
            {% if post.category %}
            <div class="blog-post-category">{{ post.category }}</div>
            {% endif %}
            <div><i class="fas fa-calendar"></i>{{ post.created_at.strftime('%B %d, %Y') }}</div>
            <div><i class="fas fa-user"></i>{{ post.author.full_name if post.author else 'STARBLUE Team' }}</div>
            {% if post.views %}
            <div><i class="fas fa-eye"></i>{{ post.views }} views</div>
            {% endif %}
        </div>
        <h1 class="blog-post-title">{{ post.title }}</h1>
    </div>
</section>

<div class="container">
    <!-- Navigation -->
    <div class="blog-post-navigation">
        <a href="{{ url_for('blog') }}" class="nav-btn">
            <i class="fas fa-arrow-left"></i>Back to Blog
        </a>
        <div class="d-flex gap-2">
            <a href="#" onclick="window.print(); return false;" class="nav-btn">
                <i class="fas fa-print"></i>Print
            </a>
            <a href="#share" class="nav-btn">
                <i class="fas fa-share"></i>Share
            </a>
        </div>
    </div>
    
    <!-- Blog Post Content -->
    <article class="blog-post-content">
        {{ post.content|safe }}
        
        <!-- Tags -->
        {% if post.tags %}
        <div class="blog-post-tags">
            <h4><i class="fas fa-tags me-2"></i>Tags</h4>
            {% for tag in post.tags.split(',') %}
            <a href="#" class="tag">{{ tag.strip() }}</a>
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- Share Buttons -->
        <div class="share-buttons" id="share">
            <h4><i class="fas fa-share-alt me-2"></i>Share This Post</h4>
            <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.url }}" 
               target="_blank" class="share-btn facebook">
                <i class="fab fa-facebook-f"></i>
            </a>
            <a href="https://twitter.com/intent/tweet?url={{ request.url }}&text={{ post.title }}" 
               target="_blank" class="share-btn twitter">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.url }}" 
               target="_blank" class="share-btn linkedin">
                <i class="fab fa-linkedin-in"></i>
            </a>
            <a href="https://wa.me/?text={{ post.title }} {{ request.url }}" 
               target="_blank" class="share-btn whatsapp">
                <i class="fab fa-whatsapp"></i>
            </a>
        </div>
    </article>
</div>

<!-- Related Posts -->
{% if related_posts %}
<section class="related-posts">
    <div class="container">
        <h3><i class="fas fa-newspaper me-3"></i>Related Posts</h3>
        <div class="related-posts-grid">
            {% for related_post in related_posts %}
            <div class="related-post-card">
                <h4><a href="{{ url_for('blog_post', slug=related_post.slug) }}">{{ related_post.title }}</a></h4>
                {% if related_post.excerpt %}
                <p>{{ related_post.excerpt[:150] }}...</p>
                {% endif %}
                <div class="post-meta">
                    <span><i class="fas fa-calendar me-1"></i>{{ related_post.created_at.strftime('%b %d, %Y') }}</span>
                    {% if related_post.views %}
                    <span><i class="fas fa-eye me-1"></i>{{ related_post.views }} views</span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}
{% endblock %}
